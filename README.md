# Code Flatten 🥞

**Flatten & Inflate.** 将立体项目“压扁”成 AI 上下文，或将生成文本“重构”为项目代码。

[cite_start]Code Flatten 是一个专为 AI 辅助编程设计的轻量级 Web 工具，旨在解决大语言模型（LLM）对话中代码上下文传输零散、还原困难的痛点 [cite: 7]。

## 1. 核心功能 (What it does)

* **🥞 压扁 (Flatten)：一键生成上下文**
    * [cite_start]拖拽文件夹，自动生成包含**目录树结构**和**文件内容**的单一文本块 [cite: 12, 96]。
    * [cite_start]智能过滤（支持 `.gitignore`）、自动计算 Token（针对中英文混合优化） [cite: 41, 51]。
    * [cite_start]支持仅复制目录树或自定义补充特定文件 [cite: 130, 134]。
* **🏗️ 重构 (Inflate)：代码无损还原**
    * 将 AI 修改后的完整文本粘贴回来，工具自动解析标记。
    * [cite_start]将平铺的文本瞬间“充气”还原为真实的 Zip 项目包，保留原有目录结构 [cite: 102, 115]。
* **🛡️ 隐私优先**
    * [cite_start]纯前端运行，所有文件处理均在浏览器本地完成，无服务器上传 [cite: 9, 37]。

## 2. 使用场景探索 (Use Cases)

除了基础的“发代码给 AI”，本工具在以下场景中也能极大提升效率：

### 🤖 AI 协作与交互
* [cite_start]**项目全景投喂**：在项目启动阶段，将现有代码库结构和核心文件打包，一次性发给 ChatGPT/Claude，让 AI 快速理解项目架构 [cite: 27]。
* [cite_start]**复杂重构落地**：当 AI 重写了多个文件时，无需一个个手动复制粘贴。直接复制 AI 回复的整段文本，使用“重构”功能一键下载 Zip 覆盖原文件 [cite: 99]。
* **Prompt 范例制作 (Few-Shot)**：在编写提示词时，需要提供“优秀的现有代码”作为范例。使用此工具将一个标准模块“压扁”，作为高质量的 Prompt 上下文嵌入。

### 📚 知识管理与文档
* **代码快照归档**：在 Notion、Obsidian 或飞书文档中记录技术方案时，将相关代码模块“压扁”存入。既保留了完整的目录结构关系，又便于未来直接复制给 AI 进行二次开发。
* [cite_start]**自动生成架构图**：仅使用工具的“仅复制树 (Tree Only)”功能，快速生成项目的 ASCII 目录结构图，用于编写 README 或技术文档 [cite: 20]。

### 🚀 效率与传输
* **跨环境“文本化”传输**：在远程桌面（RDP）、虚拟桌面（VDI）或某些受限容器环境中，文件传输（SCP/FTP）可能被禁用，但剪贴板可用。将代码文件夹转换为文本，粘贴过去后再还原，作为一种临时的“文件传输协议”。
* [cite_start]**Token 预算评估**：在发送长代码前，利用内置的 Token 估算器（支持中文优化），预判是否会超出模型的上下文窗口限制，避免对话中断 [cite: 16, 52]。
* **即时通讯代码分享**：在 Slack/微信 中讨论代码时，与其发送多个文件或压缩包，不如发送一个“压扁”的文本文件，对方既可以直接阅读，也可以交给 AI 解释，极大地降低了沟通成本。
